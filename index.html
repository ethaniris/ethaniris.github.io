<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
  const LIFF_ID = "YOUR_LIFF_ID";
  (async () => {
    const here = location.href;
    const p = new URL(here).searchParams;
    const shareUrl = p.get("url"); // 你要分享出去的文字或短連結
    await liff.init({ liffId: LIFF_ID });
    if (!liff.isLoggedIn()) {
      liff.login({ redirectUri: here });
      return;
    }
    if (!liff.isInClient() || !liff.isApiAvailable("shareTargetPicker")) {
      alert("請在 LINE 內開啟");
      return;
    }
    try {
      await liff.shareTargetPicker([
        { type: "text", text: `請分享給朋友\n${shareUrl}` },
      ]);
      // 這裡只能知道「成功送出」，拿不到「幾位」
    } catch (e) {
      // 使用者取消或錯誤
    } finally {
      if (liff.isInClient()) liff.closeWindow();
    }
  })();
</script>
